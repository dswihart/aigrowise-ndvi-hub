(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5997:function(e,t,s){Promise.resolve().then(s.bind(s,2490))},2490:function(e,t,s){"use strict";s.d(t,{default:function(){return x}});var r=s(7573),a=s(7653),n=s(4251),l=s(3187),i=s(6113),d=s(1998),c=s(9682),o=s(7350),u=s(9954),m=s(3046);function x(e){var t;let{session:s}=e,[x,f]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,j]=(0,a.useState)(null),[v,b]=(0,a.useState)(null),[y,N]=(0,a.useState)(""),[w,C]=(0,a.useState)(""),[D,S]=(0,a.useState)(null),[R,k]=(0,a.useState)(null),[Z,A]=(0,a.useState)(!1),{data:_=[],refetch:E}=m.S.images.getAllClients.useQuery(),T=m.S.images.uploadForClient.useMutation({onSuccess:e=>{j("Image successfully assigned to ".concat(e.image.clientEmail)),b(null),f(""),p(""),E()},onError:e=>{b(e.message),j(null)}}),I=async e=>{if(e.preventDefault(),j(null),b(null),!x||!h){b("Please provide both image URL and client email");return}T.mutate({imageUrl:x,clientEmail:h})},P=async e=>{if(e.preventDefault(),S(null),k(null),A(!0),!y||!w){k("Please provide both email and password"),A(!1);return}try{let e=await fetch("/api/admin/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,password:w})}),t=await e.json();t.success?(S("Client ".concat(t.client.email," created successfully")),N(""),C(""),E()):k(t.error||"Failed to create client")}catch(e){k("An unexpected error occurred")}finally{A(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-heading font-bold text-secondary-800",children:"\uD83C\uDF31 Aigrowise Admin"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-secondary-600",children:["Welcome, ",null===(t=s.user)||void 0===t?void 0:t.email]}),(0,r.jsx)(l.z,{onClick:()=>{(0,n.signOut)({callbackUrl:"/login"})},variant:"outline",size:"sm",children:"Sign Out"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("a",{href:"/admin/create-client",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-sm font-medium inline-flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDC64"}),(0,r.jsx)("span",{children:"Create New Client"})]}),(0,r.jsxs)("a",{href:"/admin/clients",className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-6 py-3 rounded-lg text-sm font-medium inline-flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDC65"}),(0,r.jsx)("span",{children:"Manage Clients"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCE4"}),(0,r.jsx)("span",{children:"Upload Image for Client"})]}),(0,r.jsx)(i.SZ,{children:"Assign an NDVI image to a specific client's account"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[g&&(0,r.jsx)(o.bZ,{className:"border-primary-200 bg-primary-50",children:(0,r.jsx)(o.X,{className:"text-primary-800",children:g})}),v&&(0,r.jsx)(o.bZ,{variant:"destructive",children:(0,r.jsx)(o.X,{children:v})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"imageUrl",children:"Image URL"}),(0,r.jsx)(d.I,{id:"imageUrl",type:"url",placeholder:"https://example.com/ndvi-image.tiff",value:x,onChange:e=>f(e.target.value),required:!0}),(0,r.jsx)("p",{className:"text-xs text-secondary-500",children:"Enter the URL of the NDVI image stored in your object storage"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"clientEmail",children:"Client Email"}),(0,r.jsx)(d.I,{id:"clientEmail",type:"email",placeholder:"client@example.com",value:h,onChange:e=>p(e.target.value),required:!0}),(0,r.jsx)("p",{className:"text-xs text-secondary-500",children:"The email address of the client who should receive this image"})]}),(0,r.jsx)(l.z,{type:"submit",className:"w-full bg-primary-500 hover:bg-primary-600",disabled:T.isLoading,children:T.isLoading?"Uploading...":"Upload & Assign Image"})]})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDC64"}),(0,r.jsx)("span",{children:"Create New Client"})]}),(0,r.jsx)(i.SZ,{children:"Add a new client account to the system"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[D&&(0,r.jsx)(o.bZ,{className:"border-primary-200 bg-primary-50",children:(0,r.jsx)(o.X,{className:"text-primary-800",children:D})}),R&&(0,r.jsx)(o.bZ,{variant:"destructive",children:(0,r.jsx)(o.X,{children:R})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"newClientEmail",children:"Client Email"}),(0,r.jsx)(d.I,{id:"newClientEmail",type:"email",placeholder:"client@example.com",value:y,onChange:e=>N(e.target.value),required:!0,disabled:Z})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"newClientPassword",children:"Password"}),(0,r.jsx)(d.I,{id:"newClientPassword",type:"password",placeholder:"Enter secure password",value:w,onChange:e=>C(e.target.value),required:!0,disabled:Z}),(0,r.jsx)("p",{className:"text-xs text-secondary-500",children:"Minimum 6 characters"})]}),(0,r.jsx)(l.z,{type:"submit",className:"w-full bg-secondary-600 hover:bg-secondary-700",disabled:Z,children:Z?"Creating...":"Create Client Account"})]})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDC65"}),(0,r.jsx)("span",{children:"Client Accounts"})]}),(0,r.jsx)(i.SZ,{children:"Manage client accounts and view their information"})]}),(0,r.jsx)(i.aY,{children:0===_.length?(0,r.jsx)("div",{className:"text-center py-8 text-secondary-500",children:(0,r.jsx)("p",{children:"No clients registered yet"})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(u.iA,{children:[(0,r.jsx)(u.xD,{children:(0,r.jsxs)(u.SC,{children:[(0,r.jsx)(u.ss,{children:"Email"}),(0,r.jsx)(u.ss,{children:"Joined"})]})}),(0,r.jsx)(u.RM,{children:_.map(e=>(0,r.jsxs)(u.SC,{children:[(0,r.jsx)(u.pj,{className:"font-medium",children:e.email}),(0,r.jsx)(u.pj,{children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[(0,r.jsx)(i.Zb,{children:(0,r.jsx)(i.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:_.length}),(0,r.jsx)("p",{className:"text-sm text-secondary-600",children:"Total Clients"})]}),(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDC65"})]})})}),(0,r.jsx)(i.Zb,{children:(0,r.jsx)(i.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:"--"}),(0,r.jsx)("p",{className:"text-sm text-secondary-600",children:"Images Uploaded"})]}),(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDDBC️"})]})})}),(0,r.jsx)(i.Zb,{children:(0,r.jsx)(i.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:"Active"}),(0,r.jsx)("p",{className:"text-sm text-secondary-600",children:"System Status"})]}),(0,r.jsx)("div",{className:"text-3xl",children:"✅"})]})})})]})]})]})}},7350:function(e,t,s){"use strict";s.d(t,{X:function(){return c},bZ:function(){return d}});var r=s(7573),a=s(7653),n=s(5517),l=s(5974);let i=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:a}),s),...n})});d.displayName="Alert",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})}).displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},3187:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7573),a=s(7653),n=s(2721),l=s(5517),i=s(5974);let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:c=!1,...o}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:a,size:l,className:s})),ref:t,...o})});c.displayName="Button"},6113:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},ll:function(){return d}});var r=s(7573),a=s(7653),n=s(5974);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},1998:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var r=s(7573),a=s(7653),n=s(5974);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},9682:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var r=s(7573),a=s(7653),n=s(6646),l=a.forwardRef((e,t)=>(0,r.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=s(5517),d=s(5974);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l,{ref:t,className:(0,d.cn)(c(),s),...a})});o.displayName=l.displayName},9954:function(e,t,s){"use strict";s.d(t,{RM:function(){return d},SC:function(){return c},iA:function(){return l},pj:function(){return u},ss:function(){return o},xD:function(){return i}});var r=s(7573),a=s(7653),n=s(5974);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...a})})});l.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...a})});i.displayName="TableHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...a})});d.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});c.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})});o.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},5974:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7908),a=s(6290);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},3046:function(e,t,s){"use strict";s.d(t,{S:function(){return i}});var r=s(8903),a=s(5904),n=s(1006);s(3875);let l=()=>"",i=(0,a.t)({config:()=>({transformer:n.ZP,links:[(0,r.N8)({url:"".concat(l(),"/api/trpc")})]}),ssr:!1})},6646:function(e,t,s){"use strict";s.d(t,{WV:function(){return i},jH:function(){return d}});var r=s(7653),a=s(3458),n=s(2721),l=s(7573),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,n.Z8)(`Primitive.${t}`),a=r.forwardRef((e,r)=>{let{asChild:a,...n}=e,i=a?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(i,{...n,ref:r})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function d(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[271,251,477,293,286,744],function(){return e(e.s=5997)}),_N_E=e.O()}]);