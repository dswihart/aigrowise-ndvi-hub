(()=>{var e={};e.id=452,e.ids=[452],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},35034:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},23507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(51407),r(84099),r(87824);var s=r(93282),a=r(5736),i=r(93906),n=r.n(i),l=r(36880),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["create-client",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,51407)),"C:\\Users\\dswih\\Documents\\bmad-aigrowise\\apps\\nextjs\\app\\admin\\create-client\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,66952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,84099)),"C:\\Users\\dswih\\Documents\\bmad-aigrowise\\apps\\nextjs\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,87824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,66952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\dswih\\Documents\\bmad-aigrowise\\apps\\nextjs\\app\\admin\\create-client\\page.tsx"],u="/admin/create-client/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/create-client/page",pathname:"/admin/create-client",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54565:(e,t,r)=>{Promise.resolve().then(r.bind(r,48599))},28202:(e,t,r)=>{Promise.resolve().then(r.bind(r,65675))},58938:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,24424,23)),Promise.resolve().then(r.t.bind(r,37752,23)),Promise.resolve().then(r.t.bind(r,75275,23)),Promise.resolve().then(r.t.bind(r,29842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},48599:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(73227),a=r(23677),i=r(62854),n=r(7403),l=r(91009),o=r(56423),d=r(48918),c=r(40096);function u(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),y=async s=>{if(s.preventDefault(),v(null),w(null),h(!0),!t||!u){w("Please fill in all fields"),h(!1);return}if(u.length<6){w("Password must be at least 6 characters"),h(!1);return}if(u!==p){w("Passwords do not match"),h(!1);return}try{let s=await fetch("/api/admin/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:u})}),a=await s.json();s.ok&&a.success?(v(`Client account created successfully for ${a.client.email}`),r(""),m(""),x(""),setTimeout(()=>{e.push("/admin")},2e3)):w(a.error||"Failed to create client account")}catch(e){w("An unexpected error occurred. Please try again.")}finally{h(!1)}};return(0,s.jsxs)(l.Zb,{className:"w-full max-w-md mx-auto",children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsxs)(l.ll,{className:"flex items-center space-x-2",children:[s.jsx("span",{children:"\uD83D\uDC64"}),s.jsx("span",{children:"Create New Client Account"})]}),s.jsx(l.SZ,{children:"Add a new client to the Aigrowise NDVI system"})]}),s.jsx(l.aY,{children:(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[g&&s.jsx(c.bZ,{className:"border-green-200 bg-green-50",children:(0,s.jsxs)(c.X,{className:"text-green-800",children:["✅ ",g]})}),b&&s.jsx(c.bZ,{variant:"destructive",children:(0,s.jsxs)(c.X,{children:["❌ ",b]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"email",children:"Client Email Address"}),s.jsx(o.I,{id:"email",type:"email",placeholder:"client@example.com",value:t,onChange:e=>r(e.target.value),required:!0,disabled:f}),s.jsx("p",{className:"text-xs text-gray-500",children:"This will be the client's login email"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"password",children:"Password"}),s.jsx(o.I,{id:"password",type:"password",placeholder:"Enter secure password",value:u,onChange:e=>m(e.target.value),required:!0,disabled:f,minLength:6}),s.jsx("p",{className:"text-xs text-gray-500",children:"Minimum 6 characters"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsx(o.I,{id:"confirmPassword",type:"password",placeholder:"Confirm password",value:p,onChange:e=>x(e.target.value),required:!0,disabled:f,minLength:6})]}),(0,s.jsxs)("div",{className:"flex space-x-4 pt-4",children:[s.jsx(n.z,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:f,children:f?(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Creating..."]}):"Create Client Account"}),s.jsx(n.z,{type:"button",variant:"outline",onClick:()=>{e.push("/admin")},disabled:f,children:"Cancel"})]})]})})]})}},65675:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(73227),a=r(9925);let i=r(86040).S.withTRPC(function({children:e}){return s.jsx(a.SessionProvider,{children:e})})},40096:(e,t,r)=>{"use strict";r.d(t,{X:()=>d,bZ:()=>o});var s=r(73227),a=r(23677),i=r(31086),n=r(68969);let l=(0,i.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,n.cn)(l({variant:t}),e),...r}));o.displayName="Alert",a.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},7403:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var s=r(73227),a=r(23677),i=r(62007),n=r(31086),l=r(68969);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},d)=>{let c=a?i.g7:"button";return s.jsx(c,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},91009:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>o});var s=r(73227),a=r(23677),i=r(68969);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},56423:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(73227),a=r(23677),i=r(68969);let n=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));n.displayName="Input"},48918:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(73227),a=r(23677),i=r(45579),n=a.forwardRef((e,t)=>(0,s.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=r(31086),o=r(68969);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(n,{ref:r,className:(0,o.cn)(d(),e),...t}));c.displayName=n.displayName},68969:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(91126),a=r(82890);function i(...e){return(0,a.m6)((0,s.W)(e))}},86040:(e,t,r)=>{"use strict";r.d(t,{S:()=>l});var s=r(36822),a=r(71496),i=r(84182);let n=()=>process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:`http://localhost:${process.env.PORT??3e3}`,l=(0,a.t)({config:()=>({transformer:i.ZP,links:[(0,s.N8)({url:`${n()}/api/trpc`})]}),ssr:!1})},51407:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(99013),a=r(59224),i=r(89011),n=r(78503),l=r(53189);let o=(0,l.createProxy)(String.raw`C:\Users\dswih\Documents\bmad-aigrowise\apps\nextjs\app\admin\create-client\client-creation-form.tsx`),{__esModule:d,$$typeof:c}=o;o.default;let u=(0,l.createProxy)(String.raw`C:\Users\dswih\Documents\bmad-aigrowise\apps\nextjs\app\admin\create-client\client-creation-form.tsx#default`);async function m(){let e=await (0,a.getServerSession)(n.L);return e||(0,i.redirect)("/login"),"ADMIN"!==e.user?.role&&(0,i.redirect)("/dashboard"),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"text-2xl font-heading font-bold text-secondary-800",children:"\uD83C\uDF31 Aigrowise Admin - Create Client"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("a",{href:"/admin",className:"text-sm text-secondary-600 hover:text-secondary-800",children:"← Back to Dashboard"}),s.jsx("span",{className:"text-sm text-secondary-600",children:e.user?.email})]})]})})}),s.jsx("main",{className:"max-w-2xl mx-auto py-8 px-4",children:s.jsx(u,{})})]})}},84099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,metadata:()=>p});var s=r(99013),a=r(46879),i=r.n(a),n=r(7637),l=r.n(n);r(20001);var o=r(53189);let d=(0,o.createProxy)(String.raw`C:\Users\dswih\Documents\bmad-aigrowise\apps\nextjs\app\providers.tsx`),{__esModule:c,$$typeof:u}=d;d.default;let m=(0,o.createProxy)(String.raw`C:\Users\dswih\Documents\bmad-aigrowise\apps\nextjs\app\providers.tsx#default`),p={title:"Aigrowise NDVI Hub",description:"Secure access to your agricultural NDVI imagery and vegetation analysis data"};function x({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:`${i().variable} ${l().variable} font-sans antialiased`,children:s.jsx(m,{children:e})})})}},78503:(e,t,r)=>{"use strict";r.d(t,{L:()=>l});var s=r(18452),a=r(10427),i=r(74750),n=r.n(i);let l={providers:[(0,s.Z)({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let t=await a._.user.findUnique({where:{email:e.email}});return t&&await n().compare(e.password,t.password)?{id:t.id,name:t.email,email:t.email,role:t.role}:null}})],session:{strategy:"jwt"},callbacks:{async jwt({token:e,user:t}){if(t&&(e.role=t.role??e.role,e.id=t.id),!t&&e.email){let t=await a._.user.findUnique({where:{email:e.email},select:{id:!0,role:!0}});t&&(e.role=t.role,e.id=t.id)}return e},session:async({session:e,token:t})=>(e.user.role=t.role,e.user.id=t.id,e)},pages:{signIn:"/login"},secret:process.env.NEXTAUTH_SECRET}},10427:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var s=r(53524);let a=global.prisma??new s.PrismaClient},66952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(87201);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},20001:()=>{},45579:(e,t,r)=>{"use strict";r.d(t,{WV:()=>l,jH:()=>o});var s=r(23677),a=r(62812),i=r(62007),n=r(73227),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.Z8)(`Primitive.${t}`),a=s.forwardRef((e,s)=>{let{asChild:a,...i}=e,l=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...i,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function o(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[522,223,152,201,68],()=>r(23507));module.exports=s})();