// Aigrowise NDVI Hub Database Schema
// Based on architecture specification

generator client {
  provider = prisma-client-js
}

datasource db {
  provider = postgresql
  url      = env(DATABASE_URL)
}

enum Role {
  CLIENT
  ADMIN
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  role      Role     @default(CLIENT)
  images    Image[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Image {
  id        String   @id @default(cuid())
  url       String
  filename  String?
  title     String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@index([userId], map: "Image_user_id_idx")
}
